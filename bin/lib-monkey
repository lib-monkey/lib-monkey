#!/usr/bin/env node

'use strict';

var pkg = require('../package.json');
var program = require('commander');
var spawn = require('child_process').spawn;
var colors = require('colors/safe');


program
  .version(pkg.version)
  .usage('[options] <cmd ...>')
  .option('-s, --seed <n>', 'Seed', parseInt)
  .parse(process.argv);

if(program.seed){
  process.env.LIB_MONKEY_SEED = program.seed;
}

executeComand(process.argv.splice(2));

function executeComand(args) {
  function isOption(value){
    var result = false;
    program.options.forEach(function(option) {
      if(option.short === value || option.long === value){
        result = true;
      }
    });
    return result;
  }

  var command = '';

  for(var i = 0; i < args.length; i++){
    if(args[i][0] === '-' && isOption(args[i])){
      i++;
    } else {
      command = args.splice(i);
      break;
    }
  }

  if(command)
    spawn(command[0], command.splice(1), {stdio: "inherit"});
};